javascript: 

  document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
    $('#getBrandWCPayRequest').click(function(e){
      WeixinJSBridge.invoke('getBrandWCPayRequest',{
        "appId" : "#{j(appid)}", 
        "timeStamp" : "#{j(sanitize timestamp)}", 
        "nonceStr" : "#{j(sanitize nonce_str)}", 
        "package" : "#{j(sanitize package)}",
        "signType" : "#{j(sanitize sign_type)}", 
        "paySign" : "#{j(sanitize sign)}" 
      },function(res){
        if(res.err_msg == "get_brand_wcpay_request:ok") {
          window.location = "#{j(orders_path)}"
        }
      }); 
    });
  }, false)
